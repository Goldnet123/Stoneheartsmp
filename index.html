<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StoneheartSMP ‚Äî Join the Community</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family: Arial, Helvetica, sans-serif; transition: background 0.3s, color 0.3s; }
body { background:#0b1020; color:#fff; line-height:1.6; overflow-x:hidden; }
a { text-decoration:none; color:#ff6f61; transition:0.2s; }
a:hover { color:#ffa07a; }

/* Header / Hero */
header {
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  position:relative;
  flex-direction:column;
  min-height:100vh;
  padding:20px;
  background:linear-gradient(135deg,#1a1a2e,#0b1020);
}
header h1 { font-size:3rem; margin-bottom:0.5rem; animation: fadeInDown 1s ease forwards; }
header p { font-size:1.2rem; margin-bottom:1rem; color:#bbb; animation: fadeInDown 1s ease 0.5s forwards; opacity:0; }
header #serverStatus { font-size:1rem; margin-bottom:1rem; color:#ffb366; animation: fadeInDown 1s ease 1s forwards; opacity:0; }
.btn {
  padding:16px 32px;
  border:none;
  border-radius:8px;
  background:#ff6f61;
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition:0.3s;
  box-shadow: 0 0 10px #ff6f61;
  animation: fadeInUp 1s ease 1.5s forwards;
  opacity:0;
}
.btn:hover { background:#ffa07a; box-shadow:0 0 20px #ffa07a,0 0 30px #ff6f61; transform: translateY(-3px); }

/* Dark/Light Mode Button */
#modeToggle {
  position:absolute;
  top:20px;
  right:20px;
  padding:8px 12px;
  background:rgba(255,255,255,0.1);
  border:none;
  border-radius:6px;
  color:#fff;
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
}
#modeToggle:hover { background:rgba(255,111,97,0.3); }

/* Keyframes */
@keyframes fadeInDown { 0%{opacity:0; transform:translateY(-30px);} 100%{opacity:1; transform:translateY(0);} }
@keyframes fadeInUp { 0%{opacity:0; transform:translateY(30px);} 100%{opacity:1; transform:translateY(0);} }

/* Section */
section { padding:60px 20px; max-width:1200px; margin:0 auto; }
h2 { font-size:2rem; margin-bottom:40px; text-align:center; color:#ff6f61; text-shadow: 1px 1px #000; }
.features { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; }
.feature { background:rgba(255,255,255,0.05); padding:20px; border-radius:12px; text-align:center; transition:0.3s; opacity:0; transform: translateY(20px); }
.feature.visible { opacity:1; transform: translateY(0); transition:0.6s ease-out; }
.feature:hover { background:rgba(255,111,97,0.2); box-shadow:0 0 15px #ff6f61; }

/* Contact & Messages */
.contact { text-align:center; margin-top:60px; }
.contact p { margin-bottom:15px; font-size:1rem; }
.contact a.btn { font-size:1rem; padding:12px 24px; }
#recentMessages { max-height:300px; overflow-y:auto; padding:10px; background:rgba(255,255,255,0.05); border-radius:8px; margin-bottom:20px; text-align:left; }

/* Footer */
footer { text-align:center; padding:20px; background:#090c16; font-size:0.9rem; color:#888; }

/* Responsive */
@media (max-width:768px) { header h1{font-size:2.2rem;} header p{font-size:1rem;} .btn{padding:12px 24px;font-size:0.9rem;} }
@media (max-width:480px) { header h1{font-size:1.8rem;} header p{font-size:0.9rem;} section{padding:40px 10px;} }

/* Light Mode */
body.light { background:#f5f5f5; color:#111; }
body.light header { background: linear-gradient(135deg,#ddd,#bbb); }
body.light a { color:#ff6f61; }
body.light a:hover { color:#ff4500; }
body.light .feature { background: rgba(0,0,0,0.05); }
body.light #recentMessages { background: rgba(0,0,0,0.05); }
body.light footer { background:#e0e0e0; color:#555; }
</style>
</head>
<body>

<!-- Hero Section -->
<header>
  <button id="modeToggle">üåô</button>
  <h1>StoneheartSMP</h1>
  <p>Join our community now on Discord!</p>
  <div id="serverStatus">Status: Lade...</div>
  <a href="https://discord.gg/5K9fYQzpkC" target="_blank" class="btn">Join Discord</a>
</header>

<!-- Features Section -->
<section>
  <h2>Server-Features</h2>
  <div class="features">
    <div class="feature"><h3>Lifesteal Survival</h3><p>√úberlebe und stehle Herzen von anderen Spielern, um zu gewinnen.</p></div>
    <div class="feature"><h3>Community Events</h3><p>Regelm√§√üige Kriege, Bauwettbewerbe und spannende Aktionen.</p></div>
    <div class="feature"><h3>Essentielle Plugins</h3><p>Verbessere dein Spielerlebnis mit n√ºtzlichen Plugins f√ºr Survival.</p></div>
    <div class="feature"><h3>Aktive Moderation</h3><p>Ein engagiertes Team sorgt f√ºr ein faires und sicheres Umfeld.</p></div>
  </div>
</section>

<!-- Contact Section -->
<section class="contact">
  <h2>Nachricht an Discord</h2>
  <form id="discordForm">
    <input type="text" id="username" placeholder="Dein Name" required style="padding:8px;width:200px;margin-right:10px;">
    <input type="text" id="message" placeholder="Deine Nachricht" required style="padding:8px;width:400px;margin-right:10px;">
    <button type="submit" class="btn">Senden</button>
  </form>
  <p id="formStatus" style="margin-top:10px;color:#ffb366;"></p>

  <h2>Nachrichten der letzten 10 Minuten</h2>
  <div id="recentMessages">Lade Nachrichten...</div>
</section>

<!-- Footer -->
<footer>
  &copy; 2025 StoneheartSMP ‚Äî Join the Discord now!
</footer>

<script>
// Scroll Animation f√ºr Features
const features = document.querySelectorAll('.feature');
function revealFeatures() {
  const triggerBottom = window.innerHeight * 0.85;
  features.forEach(feature => {
    const featureTop = feature.getBoundingClientRect().top;
    if(featureTop < triggerBottom) feature.classList.add('visible');
  });
}
window.addEventListener('scroll', revealFeatures);
window.addEventListener('load', revealFeatures);

// Dark / Light Mode Toggle
const modeBtn = document.getElementById('modeToggle');
modeBtn.addEventListener('click', () => {
  document.body.classList.toggle('light');
  if(document.body.classList.contains('light')) modeBtn.textContent = 'üåô';
  else modeBtn.textContent = '‚òÄÔ∏è';
});

// Serverstatus
async function updateServerStatus() {
  const statusEl = document.getElementById('serverStatus');
  try {
    const response = await fetch('https://api.mcsrvstat.us/2/stoneheartsmp.gl.joinmc.link');
    const data = await response.json();
    if(data.online) {
      statusEl.textContent = `Status: Online ‚Äî Spieler online: ${data.players.online}/${data.players.max}`;
      statusEl.style.color = '#7fff7f';
    } else {
      statusEl.textContent = 'Status: Offline';
      statusEl.style.color = '#ff4c4c';
    }
  } catch(err) {
    statusEl.textContent = 'Status: Fehler beim Abrufen';
    statusEl.style.color = '#ffb366';
    console.error(err);
  }
}
updateServerStatus();
setInterval(updateServerStatus, 30000);

// Discord Nachrichten-Formular
const form = document.getElementById('discordForm');
const status = document.getElementById('formStatus');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const username = document.getElementById('username').value;
  const message = document.getElementById('message').value;

  try {
    const res = await fetch('/sendDiscordMessage', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({username, message})
    });

    if(res.ok) {
      status.textContent = "Nachricht gesendet ‚úÖ";
      form.reset();
      fetchRecentMessages();
    } else {
      status.textContent = "Fehler beim Senden ‚ùå";
    }
  } catch(err) {
    console.error(err);
    status.textContent = "Fehler beim Senden ‚ùå";
  }
});

// Nachrichten der letzten 10 Minuten
async function fetchRecentMessages() {
  try {
    const res = await fetch('/recentMessages');
    const data = await res.json();
    const container = document.getElementById('recentMessages');
    if(data.length === 0) {
      container.innerHTML = "<i>Keine Nachrichten in den letzten 10 Minuten.</i>";
      return;
    }
    container.innerHTML = data.map(m => `<b>${m.username}:</b> ${m.message}`).join("<br>");
  } catch(err) { console.error(err); }
}
fetchRecentMessages();
setInterval(fetchRecentMessages, 10000);
</script>

</body>
</html>